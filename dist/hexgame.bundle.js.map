{"version":3,"sources":["webpack://hexgame/webpack/universalModuleDefinition","webpack://hexgame/./src/core/client.js","webpack://hexgame/./src/entities/entity.js","webpack://hexgame/./src/entities/shapes/hexagon.js","webpack://hexgame/./src/entities/shapes/polygon.js","webpack://hexgame/./src/entities/shapes/square.js","webpack://hexgame/./src/entities/shapes/triangle.js","webpack://hexgame/./src/entities/text/debug.js","webpack://hexgame/./src/utils/Keyboard.js","webpack://hexgame/./src/utils/Vector.js","webpack://hexgame/./src/utils/utils.canvas.js","webpack://hexgame/webpack/bootstrap","webpack://hexgame/webpack/runtime/define property getters","webpack://hexgame/webpack/runtime/hasOwnProperty shorthand","webpack://hexgame/webpack/runtime/make namespace object"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;;;ACV0D;AAClB;AACY;AACE;AACJ;AACJ;AACF;;;AAG7B;;AAEf;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;;AAGA,0BAA0B,uDAAQ;;;AAGlC;;AAEA,wBAAwB,sEAAc;AACtC;AACA;;AAEA;;AAEA;;AAEA;AACA,qCAAqC,gEAAO,KAAK,qDAAM;AACvD,qCAAqC,iEAAQ,KAAK,qDAAM;AACxD,qCAAqC,+DAAM,KAAK,qDAAM;AACtD,qCAAqC,4DAAK,KAAK,qDAAM,wBAAwB,kCAAkC;AAC/G,qCAAqC,4DAAK,KAAK,qDAAM,2BAA2B,sCAAsC;AACtH,qCAAqC,4DAAK,KAAK,qDAAM,gCAAgC,wCAAwC;;AAE7H;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;;;;;ACzGqC;;AAErC;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,kDAAM;AAChC,8BAA8B,kDAAM;AACpC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;;AC5BgC;;AAEhC;AACA;AACA;AACe,sBAAsB,6CAAO;;AAE5C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;ACzBwC;AACT;;AAE/B;AACA;AACA;AACe,sBAAsB,4CAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,kDAAM;AACrC,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;;AC5BgC;;AAEhC;AACA;AACA;AACe,qBAAqB,6CAAO;;AAE3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;ACzBwC;AACR;;AAEhC;AACA;AACA;AACe,uBAAuB,6CAAO;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,kDAAM;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;AC9B+B;;AAEhB,oBAAoB,4CAAM;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,WAAW,IAAI,WAAW;AAC5C;;AAEA,C;;;;;;;;;;;;;;AC1Be;;AAEf;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,C;;;;;;;;;;;;;;ACjEA;AACA;AACA;AACe;;AAEf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,OAAO,IAAI,OAAO;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;;;ACpFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;UCzCA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E","file":"hexgame.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hexgame\"] = factory();\n\telse\n\t\troot[\"hexgame\"] = factory();\n})(self, function() {\nreturn ","import { generateCanvas } from '../utils/utils.canvas.js';\r\nimport Vector from '../utils/Vector.js';\r\nimport Hexagon from '../entities/shapes/hexagon.js';\r\nimport Triangle from '../entities/shapes/triangle.js';\r\nimport Square from '../entities/shapes/square.js';\r\nimport Debug from '../entities/text/debug.js';\r\nimport Keyboard from '../utils/Keyboard.js';\r\n\r\n\r\nexport default class Client {\r\n\r\n    constructor(w, h, fps, container) {\r\n\r\n        this.config = {\r\n            width: w,\r\n            height: h,\r\n            targetFps: fps\r\n        }\r\n\r\n        this.state = {\r\n            status: 'running',\r\n            client: {\r\n                curFPS: 0,\r\n                frameCount: 0,\r\n                lastFPSUpdate: 0,\r\n                framesThisSecond: 0,\r\n                tick: 1000 / fps,\r\n                nextGameTick: new Date().getTime()\r\n            },\r\n            entities: [],\r\n\r\n\r\n            keyboard: new Keyboard(),\r\n\r\n\r\n        }\r\n\r\n        this.viewport = generateCanvas(this.config.width, this.config.height);\r\n        this.context = this.viewport.getContext('2d');\r\n        container.insertBefore(this.viewport, container.firstChild);\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        this.state.entities = [];\r\n        this.state.entities[0] = new Hexagon(new Vector(100, 100), 100, 0);\r\n        this.state.entities[1] = new Triangle(new Vector(250, 250), 50, 15);\r\n        this.state.entities[2] = new Square(new Vector(350, 100), 75, 25);\r\n        this.state.entities[3] = new Debug(new Vector(10, 30), 'FPS', () => { return this.state.client.curFPS });\r\n        this.state.entities[4] = new Debug(new Vector(10, 50), 'Frames', () => { return this.state.client.frameCount });\r\n        this.state.entities[5] = new Debug(new Vector(10, 70), 'keysPressed', () => { return this.state.keyboard.toString() });\r\n\r\n        this.loop();\r\n    }\r\n\r\n    loop() {\r\n\r\n        this.frameid = window.requestAnimationFrame(this.loop.bind(this));\r\n\r\n        let time = new Date().getTime()\r\n\r\n        if (time > this.state.client.nextGameTick) {\r\n            this.state.client.nextGameTick += this.state.client.tick;\r\n            this.state.client.frameCount++\r\n            this.update(time);\r\n            this.draw();\r\n        }\r\n\r\n        if (this.state.status == 'paused') {\r\n            cancelAnimationFrame(this.frameid);\r\n        }\r\n\r\n    }\r\n\r\n    update(timestamp) {\r\n\r\n        // Measure how many frames were rendering each loop \r\n        if (timestamp > this.state.client.lastFPSUpdate + 1000) {\r\n            this.state.client.curFPS = this.state.client.framesThisSecond;\r\n            this.state.client.lastFPSUpdate = timestamp;\r\n            this.state.client.framesThisSecond = 0;\r\n        } else {\r\n            this.state.client.framesThisSecond++;\r\n        }\r\n\r\n        // Update all the entities\r\n        for (let entity of this.state.entities) {\r\n            entity.update(this.state);\r\n        }\r\n\r\n    }\r\n\r\n    draw() {\r\n\r\n        // Clear the canvas\r\n        this.context.clearRect(0, 0, this.config.width, this.config.height)\r\n\r\n        // Draw all the entities\r\n        for (let entity of this.state.entities) {\r\n            entity.draw(this.context);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import Vector from \"../utils/Vector\";\r\n\r\n/**\r\n * Abstract Class Entity\r\n */\r\nexport default class Entity {\r\n    constructor(position) {\r\n        if (this.constructor == 'Entity') {\r\n            throw new Error(\"Abstract classes can't be instantiated.\")\r\n        }\r\n        this.position = position;\r\n\r\n        this.state = {\r\n            position: position,\r\n            velocity: new Vector(0,0),\r\n            acceleration: new Vector(0,0),\r\n        }\r\n\r\n    }\r\n\r\n    update(state) {\r\n        // Do Nothing\r\n    }\r\n\r\n    draw(ctx) {\r\n        // Do Nothing\r\n    }\r\n\r\n}","import Polygon from \"./polygon\";\r\n\r\n/**\r\n * \r\n */\r\nexport default class Hexagon extends Polygon {\r\n\r\n    constructor(position, radius, degrees = 0) {\r\n        super(position, radius, degrees)\r\n        this.sides = 6;\r\n    }\r\n\r\n    update(state) {\r\n        this.θ = (this.θ - (Math.PI / 120)) % (2 * Math.PI);\r\n    }\r\n\r\n    draw(ctx) {\r\n        ctx.beginPath();\r\n        for (let vertex of this.getVertices(this.sides)) {\r\n            ctx.lineTo(vertex.x, vertex.y);\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","import Vector from \"../../utils/Vector\";\r\nimport Entity from \"../entity\";\r\n\r\n/**\r\n * Abstract Class Polygon\r\n */\r\nexport default class Polygon extends Entity {\r\n    constructor(position, radius, degrees) {\r\n        super(position)\r\n        if (this.constructor == 'Polygon') {\r\n            throw new Error(\"Abstract classes can't be instantiated.\")\r\n        }\r\n        this.r = radius;\r\n        this.θ = degrees * (Math.PI / 180);\r\n    }\r\n\r\n    getVertices(sides) {\r\n        const vectors = [];\r\n        const initVector = new Vector(this.r, 0);\r\n        for (var i = 0; i < sides; i++) {\r\n            let vertex = this.position.add(\r\n                initVector.rotate(i * (2 * Math.PI / sides) + this.θ)\r\n            );\r\n            vectors.push(vertex);\r\n        }\r\n        return vectors;\r\n    }\r\n\r\n}","import Polygon from \"./polygon\";\r\n\r\n/**\r\n * \r\n */\r\nexport default class Square extends Polygon {\r\n\r\n    constructor(position, radius, degrees = 0) {\r\n        super(position, radius, degrees)\r\n        this.sides = 4;\r\n    }\r\n\r\n    update(state) {\r\n        this.θ = (this.θ - (Math.PI / 60)) % (2 * Math.PI);\r\n    }\r\n\r\n    draw(ctx) {\r\n        ctx.beginPath();\r\n        for (let vertex of this.getVertices(this.sides)) {\r\n            ctx.lineTo(vertex.x, vertex.y);\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","import Vector from \"../../utils/Vector\";\r\nimport Polygon from \"./polygon\";\r\n\r\n/**\r\n * \r\n */\r\nexport default class Triangle extends Polygon {\r\n\r\n    constructor(position, radius, degrees = 0) {\r\n        super(position, radius, degrees)\r\n        this.sides = 3;\r\n    }\r\n\r\n    update(state) {\r\n        this.θ = (this.θ + (Math.PI / 30)) % (2 * Math.PI);\r\n        this.r = 30 + 15 * Math.sin((360 / 60) * (state.client.frameCount % 60) * (Math.PI / 180));\r\n        this.position = this.position.add(\r\n            new Vector(2 * Math.sin((state.client.frameCount % 360) * (Math.PI / 180)), 0)\r\n        )\r\n    }\r\n\r\n    draw(ctx) {\r\n        ctx.beginPath();\r\n        for (let vertex of this.getVertices(this.sides)) {\r\n            ctx.lineTo(vertex.x, vertex.y);\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","import Entity from \"../entity\";\r\n\r\nexport default class Debug extends Entity {\r\n    constructor(position, label, field) {\r\n        super(position)\r\n        this.field = field;\r\n        this.label = label;\r\n        this.value = '';\r\n    }\r\n\r\n    update(state) {\r\n        if (typeof this.field == \"function\") {\r\n            this.value = this.field.call();\r\n        }\r\n    }\r\n\r\n    draw(ctx) {\r\n        ctx.font = '25px Arial';\r\n        ctx.fillStyle = 'black';\r\n        ctx.fillText(this.toString(), this.position.x, this.position.y);\r\n    }\r\n\r\n    toString() {\r\n        return `${this.label}: ${this.value}`;\r\n    }\r\n\r\n}","export default class Keyboard {\r\n\r\n    constructor() {\r\n\r\n        window.addEventListener(\"keydown\", (event) => this.handleKeyEvent(event, true), false);\r\n        window.addEventListener(\"keyup\", (event) => this.handleKeyEvent(event, false), false);\r\n\r\n        this.input = {\r\n            \"UP\": false,\r\n            \"DOWN\": false,\r\n            \"LEFT\": false,\r\n            \"RIGHT\": false\r\n        };\r\n    }\r\n\r\n\r\n    handleKeyEvent(event, pressed) {\r\n\r\n        if (event.defaultPrevented) {\r\n            return;\r\n        }\r\n\r\n        switch (event.key) {\r\n            case \"w\":\r\n            case \"W\":\r\n            case \"Up\":\r\n            case \"ArrowUp\":\r\n                this.input.UP = pressed;\r\n                break;\r\n\r\n            case \"s\":\r\n            case \"S\":\r\n            case \"Down\":\r\n            case \"ArrowDown\":\r\n                this.input.DOWN = pressed;\r\n                break;\r\n\r\n            case \"a\":\r\n            case \"A\":\r\n            case \"Left\":\r\n            case \"ArrowLeft\":\r\n                this.input.LEFT = pressed;\r\n                break;\r\n\r\n            case \"d\":\r\n            case \"D\":\r\n            case \"Right\":\r\n            case \"ArrowRight\":\r\n                this.input.RIGHT = pressed;\r\n                break;\r\n\r\n            default:\r\n                return;\r\n        }\r\n\r\n        // Cancel the default action to avoid it being handled twice\r\n        event.preventDefault();\r\n    }\r\n\r\n    toString() {\r\n        return Object.keys(this.input).reduce((acc, key) => {\r\n            if (this.input[key] === true) acc.push(key);\r\n            return acc;\r\n        }, []).join(\", \");\r\n    }\r\n}","/**\r\n * 2D Vector Library\r\n */\r\nexport default class Vector {\r\n\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    add(v) {\r\n        return new Vector(\r\n            this.x + v.x,\r\n            this.y + v.y\r\n        )\r\n    }\r\n\r\n    subtract(v) {\r\n        return new Vector(\r\n            this.x - v.x,\r\n            this.y - v.y\r\n        );\r\n    }\r\n\r\n    scale(scalar) {\r\n        return new Vector(\r\n            this.x * scalar,\r\n            this.y * scalar\r\n        );\r\n    }\r\n\r\n    dot(v) {\r\n        return (this.x * v.x) + (this.y * v.y);\r\n    }\r\n\r\n    cross(v) {\r\n        return new Vector(\r\n            this.y * v.x - this.x * v.y,\r\n            this.x * v.y - this.y * v.x\r\n        )\r\n    }\r\n\r\n    unit() {\r\n        return this.scale(Math.inv(this.magnitude()))\r\n    }\r\n\r\n    magnitude() {\r\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\r\n    }\r\n\r\n    max() {\r\n        return Math.max(this.x, this.y);\r\n    }\r\n\r\n    min() {\r\n        return Math.min(this.x, this.y);\r\n    }\r\n\r\n    rotate(theta) {\r\n        return new Vector(\r\n            this.x * Math.cos(theta) - this.y * Math.sin(theta),\r\n            this.x * Math.sin(theta) + this.y * Math.cos(theta)\r\n        )\r\n    }\r\n\r\n    equals(v) {\r\n        return this.x == v.x && this.y == v.y;\r\n    }\r\n\r\n    toString() {\r\n        return `[${this.x}, ${this.y}]`;\r\n    }\r\n\r\n    toArray() {\r\n        return [this.x, this.y];\r\n    }\r\n\r\n    clone() {\r\n        return new Vector(this.x, this.y);\r\n    }\r\n\r\n    get length() {\r\n        return Math.sqrt(this.dot(this));\r\n    }\r\n\r\n}","\r\nconst getPixelRatio = function (context) {\r\n    console.log('Determining pixel ratio.');\r\n\r\n    var backingStores = [\r\n        'webkitBackingStorePixelRatio',\r\n        'mozBackingStorePixelRatio',\r\n        'msBackingStorePixelRatio',\r\n        'oBackingStorePixelRatio',\r\n        'backingStorePixelRatio'\r\n    ];\r\n\r\n    var deviceRatio = window.devicePixelRatio;\r\n\r\n    // Iterate through our backing store props and determine the proper backing ratio.\r\n    var backingRatio = backingStores.reduce(function (prev, curr) {\r\n        return (context.hasOwnProperty(curr) ? context[curr] : 1);\r\n    });\r\n\r\n    // Return the proper pixel ratio by dividing the device ratio by the backing ratio\r\n    return deviceRatio / backingRatio;\r\n}\r\n\r\nconst generateCanvas = function (w, h) {\r\n    console.log('Generating canvas.');\r\n\r\n    var canvas = document.createElement('canvas'),\r\n        context = canvas.getContext('2d');\r\n    // Pass our canvas' context to our getPixelRatio method\r\n    var ratio = getPixelRatio(context);\r\n\r\n    // Set the canvas' width then downscale via CSS\r\n    canvas.width = Math.round(w * ratio);\r\n    canvas.height = Math.round(h * ratio);\r\n    canvas.style.width = w + 'px';\r\n    canvas.style.height = h + 'px';\r\n\r\n    // Scale the context so we get accurate pixel density\r\n    context.setTransform(ratio, 0, 0, ratio, 0, 0);\r\n\r\n    return canvas;\r\n}\r\n\r\nexport { getPixelRatio, generateCanvas }","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}